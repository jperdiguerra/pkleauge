{"remainingRequest":"/Users/jp/workspace/pklgue/node_modules/babel-loader/lib/index.js!/Users/jp/workspace/pklgue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jp/workspace/pklgue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jp/workspace/pklgue/src/components/PriceList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jp/workspace/pklgue/src/components/PriceList.vue","mtime":1597549846491},{"path":"/Users/jp/workspace/pklgue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgUHJpY2VJdGVtIGZyb20gJy4vUHJpY2VJdGVtJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQcmljZUxpc3QiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAnVXMnLAogICAgICByb3VuZFRvT25lOiBbJ1VTRCcsICdTR0QnLCAnQ05ZJ10sCiAgICAgIHJvdW5kVG9IdW5kcmVkOiBbJ0tSVycsICdKUFknLCAnSURSJ10KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBQcmljZUl0ZW06IFByaWNlSXRlbQogIH0sCiAgcHJvcHM6IHsKICAgIHByaWNlczogT2JqZWN0LAogICAgY3VycmVuY3k6IFN0cmluZwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbXBldGl0b3JzOiBmdW5jdGlvbiBjb21wZXRpdG9ycygpIHsKICAgICAgcmV0dXJuIHRoaXMucHJpY2VzICYmIHRoaXMucHJpY2VzLmNvbXBldGl0b3JzID8gdGhpcy5wcmljZXMuY29tcGV0aXRvcnMgOiBudWxsOwogICAgfSwKICAgIG91clByaWNlOiBmdW5jdGlvbiBvdXJQcmljZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucHJpY2VzID8gdGhpcy5yb3VuZEFtb3VudCh0aGlzLnByaWNlcy5wcmljZSkgOiAwOwogICAgfSwKICAgIHNvcnRlZFByaWNlczogZnVuY3Rpb24gc29ydGVkUHJpY2VzKCkgewogICAgICBpZiAoIXRoaXMuY29tcGV0aXRvcnMpIHJldHVybiBbXTsKICAgICAgdmFyIGFsbCA9IE9iamVjdC5lbnRyaWVzKHRoaXMuY29tcGV0aXRvcnMpOwogICAgICBhbGwucHVzaChbdGhpcy5uYW1lLCB0aGlzLm91clByaWNlLCB0cnVlXSk7CiAgICAgIHZhciBzb3J0ZWQgPSBhbGwuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhWzFdID4gYlsxXSA/IDEgOiAtMTsKICAgICAgfSk7CiAgICAgIHJldHVybiBzb3J0ZWQ7CiAgICB9LAogICAgcGVyY2VudFNhdmluZ3M6IGZ1bmN0aW9uIHBlcmNlbnRTYXZpbmdzKCkgewogICAgICBpZiAoIXRoaXMuY29tcGV0aXRvcnMpIHJldHVybiBbXTsKICAgICAgdmFyIHBlcmNlbnRTYXZpbmdzID0gW107CgogICAgICBmb3IgKHZhciBjb21wZXRpdG9yIGluIHRoaXMuY29tcGV0aXRvcnMpIHsKICAgICAgICB2YXIgY29tcGV0aXRvclByaWNlID0gdGhpcy5jb21wZXRpdG9yc1tjb21wZXRpdG9yXTsKCiAgICAgICAgaWYgKGNvbXBldGl0b3JQcmljZSA+IHRoaXMub3VyUHJpY2UpIHsKICAgICAgICAgIHZhciBkaWZmID0gY29tcGV0aXRvclByaWNlIC0gdGhpcy5vdXJQcmljZTsKICAgICAgICAgIHZhciBzYXZpbmdzID0gKGRpZmYgLyB0aGlzLm91clByaWNlICogMTAwKS50b0ZpeGVkKDIpOwogICAgICAgICAgcGVyY2VudFNhdmluZ3MucHVzaCh7CiAgICAgICAgICAgIGNvbXBldGl0b3I6IGNvbXBldGl0b3IsCiAgICAgICAgICAgIHNhdmluZ3M6IHNhdmluZ3MKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHBlcmNlbnRTYXZpbmdzOwogICAgfSwKICAgIHByaWNlRGlzcGxheTogZnVuY3Rpb24gcHJpY2VEaXNwbGF5KCkgewogICAgICByZXR1cm4gdGhpcy5wcmljZXMgPyAiIi5jb25jYXQodGhpcy5jdXJyZW5jeSwgIiAiKS5jb25jYXQodGhpcy5vdXJQcmljZSkgOiAnUmF0ZXMgdW5hdmFpbGFibGUnOwogICAgfSwKICAgIHdpdGhTYXZpbmdzOiBmdW5jdGlvbiB3aXRoU2F2aW5ncygpIHsKICAgICAgcmV0dXJuIHRoaXMucGVyY2VudFNhdmluZ3MubGVuZ3RoID4gMDsKICAgIH0sCiAgICB0YXhlc0FuZEZlZXM6IGZ1bmN0aW9uIHRheGVzQW5kRmVlcygpIHsKICAgICAgcmV0dXJuIHRoaXMucHJpY2VzID8gdGhpcy5wcmljZXMudGF4ZXNfYW5kX2ZlZXMgOiBudWxsOwogICAgfSwKICAgIHRheGVzQW5kRmVlc1Rvb2x0aXA6IGZ1bmN0aW9uIHRheGVzQW5kRmVlc1Rvb2x0aXAoKSB7CiAgICAgIGlmICghdGhpcy50YXhlc0FuZEZlZXMpIHJldHVybiAnJzsKICAgICAgcmV0dXJuICJUYXg6ICIuY29uY2F0KHRoaXMudGF4ZXNBbmRGZWVzLnRheCwgIjxicj4gSG90ZWwgZmVlczogIikuY29uY2F0KHRoaXMudGF4ZXNBbmRGZWVzLmhvdGVsX2ZlZXMpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaXNMYXN0SXRlbTogZnVuY3Rpb24gaXNMYXN0SXRlbShpbmRleCkgewogICAgICByZXR1cm4gdGhpcy5zb3J0ZWRQcmljZXMubGVuZ3RoIC0gMSA9PSBpbmRleDsKICAgIH0sCiAgICByb3VuZEFtb3VudDogZnVuY3Rpb24gcm91bmRBbW91bnQoYW1vdW50KSB7CiAgICAgIGlmICh0aGlzLnJvdW5kVG9PbmUuaW5jbHVkZXModGhpcy5jdXJyZW5jeSkpIHJldHVybiBNYXRoLnJvdW5kKGFtb3VudCk7CiAgICAgIGlmICh0aGlzLnJvdW5kVG9IdW5kcmVkLmluY2x1ZGVzKHRoaXMuY3VycmVuY3kpKSByZXR1cm4gTWF0aC5yb3VuZChhbW91bnQgLyAxMDApICogMTAwOwogICAgICByZXR1cm4gYW1vdW50OwogICAgfQogIH0KfTs="},{"version":3,"sources":["PriceList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"bg-success price\">\n      <strong>{{ priceDisplay }}</strong><sup v-if=\"taxesAndFees\">*</sup>\n      <div class=\"tax-fees\" name=\"tax-fees\"\n        v-if=\"taxesAndFees\"\n        v-tooltip.top-center=\"taxesAndFeesTooltip\"\n      >\n        * Price includes taxes and fees!\n      </div>\n    </div>\n\n    <template v-if=\"withSavings\">\n      <div\n        class=\"savings\"\n        v-for=\"percentSaving in percentSavings\"\n        :key=\"percentSaving.competitor\"\n      >\n        <strong>\n          <u>{{ `Save ${percentSaving.savings}% vs ${percentSaving.competitor}` }}</u>\n        </strong>\n      </div>\n    </template>\n    <PriceItem\n      v-for=\"(price, index) in sortedPrices\"\n      :key=\"index\"\n      :name=\"price[0]\"\n      :value=\"roundAmount(price[1])\"\n      :competitor=\"!price[2]\"\n      :currency=\"currency\"\n      :lastItem='isLastItem(index)'\n    >\n    </PriceItem>\n  </div>\n</template>\n\n<script>\nimport PriceItem from './PriceItem';\n\nexport default {\n  name: \"PriceList\",\n  data() {\n    return {\n      name: 'Us',\n      roundToOne: ['USD', 'SGD', 'CNY'],\n      roundToHundred: ['KRW', 'JPY', 'IDR']\n    };\n  },\n  components: {\n    PriceItem\n  },\n  props: {\n    prices: Object,\n    currency: String\n  },\n  computed: {\n    competitors() {\n      return this.prices && this.prices.competitors ? this.prices.competitors : null; \n    },\n    ourPrice() {\n      return this.prices ? this.roundAmount(this.prices.price) : 0;\n    },\n    sortedPrices() {\n      if(!this.competitors) return [];\n      let all = Object.entries(this.competitors);\n      all.push([this.name, this.ourPrice, true]);\n      let sorted = all.sort((a, b) => (a[1] > b[1]) ? 1 : -1);\n      return sorted;\n    },\n    percentSavings() {\n      if(!this.competitors) return [];\n      let percentSavings = [];\n      for(const competitor in this.competitors) {\n        let competitorPrice = this.competitors[competitor]\n        if(competitorPrice > this.ourPrice) {\n          let diff = competitorPrice - this.ourPrice;\n          let savings = ((diff/this.ourPrice) * 100).toFixed(2);\n          percentSavings.push({competitor, savings});\n        }\n      }\n      return percentSavings;\n    },\n    priceDisplay() {\n      return this.prices ? `${this.currency} ${this.ourPrice}` : 'Rates unavailable';\n    },\n    withSavings() {\n      return this.percentSavings.length > 0;\n    },\n    taxesAndFees() {\n      return this.prices ? this.prices.taxes_and_fees : null;\n    },\n    taxesAndFeesTooltip() {\n      if(!this.taxesAndFees) return '';\n      return `Tax: ${this.taxesAndFees.tax}<br> Hotel fees: ${this.taxesAndFees.hotel_fees}`;\n    }\n  },\n  methods: {\n    isLastItem(index) {\n      return this.sortedPrices.length - 1 == index;\n    },\n    roundAmount(amount) {\n      if(this.roundToOne.includes(this.currency)) return Math.round(amount);\n      if(this.roundToHundred.includes(this.currency)) return (Math.round(amount/100) * 100);\n      return amount;\n    }\n  }\n}\n</script>\n\n<style scoped>\nsup {\n  top: -4px;\n}\n\n.price {\n  color: white;\n  padding: 10px;\n  font-size: x-large;\n  width: 200px;\n}\n\n.tax-fees {\n  font-size: small;\n}\n\n[data-popover='tax-fees'] {\n  background: #444;\n  color: red;\n\n  font-size: 12px;\n  line-height: 1.5;\n  margin: 5px;\n}\n</style>\n"],"sourceRoot":"src/components"}]}