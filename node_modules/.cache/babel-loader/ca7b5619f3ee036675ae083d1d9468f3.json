{"remainingRequest":"/Users/jp/workspace/hotels-result-currency/node_modules/babel-loader/lib/index.js!/Users/jp/workspace/hotels-result-currency/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jp/workspace/hotels-result-currency/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jp/workspace/hotels-result-currency/src/components/PriceList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jp/workspace/hotels-result-currency/src/components/PriceList.vue","mtime":1597333900124},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFByaWNlSXRlbSBmcm9tICcuL1ByaWNlSXRlbSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJpY2VMaXN0IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogJ1VzJwogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFByaWNlSXRlbTogUHJpY2VJdGVtCiAgfSwKICBwcm9wczogewogICAgcHJpY2VzOiBPYmplY3QsCiAgICBjdXJyZW5jeTogU3RyaW5nCiAgfSwKICBjb21wdXRlZDogewogICAgLy8gV2hlbiBubyBjb21wZXRpdG9yIHJhdGVzIGFyZSBnaXZlbiwgZG8gbm90IHNob3cgYW55dGhpbmcgb3Igc2F2aW5ncyAoc2luY2UgdGhlcmUncyBubyBiYXNpcyBmb3IgY29tcGFyaXNvbikKICAgIC8vIFdoZW4gYWxsIGNvbXBldGl0b3IgcmF0ZXMgYXJlIGNoZWFwZXIgdGhhbiB1cywgdGhlcmUncyBubyBzYXZpbmdzCiAgICAvLyBXaGVuIDEgb3IgbW9yZSBjb21wZXRpdG9yIHJhdGVzIGFyZSBtb3JlIGV4cGVuc2l2ZSB0aGFuIHVzLCB3ZSBzaG91bGQgc2hvdyBvdXIgc2F2aW5ncyBvdmVyIHRoZSBjb21wZXRpdG9yJ3MgcmF0ZXMKICAgIC8vIFdoZW4gdGhlcmUncyBjb21wZXRpdG9yIHByaWNpbmcsIHdlIHNob3VsZCBzaG93IGluIHRoZSBjb21wZXRpdG9yIHByaWNpbmcgbGlzdCBvdXIgcmF0ZXMgYW5kIHdoZXJlIHdlIHN0YW5kIGluIHRoZSBvcmRlcmluZyBvZiBjaGVhcGVzdCB0byBtb3N0IGV4cGVuc2l2ZQogICAgY29tcGV0aXRvcnM6IGZ1bmN0aW9uIGNvbXBldGl0b3JzKCkgewogICAgICByZXR1cm4gdGhpcy5wcmljZXMgJiYgdGhpcy5wcmljZXMuY29tcGV0aXRvcnMgPyB0aGlzLnByaWNlcy5jb21wZXRpdG9ycyA6IG51bGw7CiAgICB9LAogICAgb3VyUHJpY2U6IGZ1bmN0aW9uIG91clByaWNlKCkgewogICAgICByZXR1cm4gdGhpcy5wcmljZXMgPyB0aGlzLnByaWNlcy5wcmljZSA6IDA7CiAgICB9LAogICAgc29ydGVkUHJpY2VzOiBmdW5jdGlvbiBzb3J0ZWRQcmljZXMoKSB7CiAgICAgIGlmICghdGhpcy5jb21wZXRpdG9ycykgcmV0dXJuIFtdOwogICAgICB2YXIgYWxsID0gT2JqZWN0LmVudHJpZXModGhpcy5jb21wZXRpdG9ycyk7CiAgICAgIGFsbC5wdXNoKFt0aGlzLm5hbWUsIHRoaXMub3VyUHJpY2UsIHRydWVdKTsKICAgICAgdmFyIHNvcnRlZCA9IGFsbC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGFbMV0gPiBiWzFdID8gMSA6IC0xOwogICAgICB9KTsKICAgICAgcmV0dXJuIHNvcnRlZDsKICAgIH0sCiAgICBwZXJjZW50U2F2aW5nczogZnVuY3Rpb24gcGVyY2VudFNhdmluZ3MoKSB7CiAgICAgIGlmICghdGhpcy5jb21wZXRpdG9ycykgcmV0dXJuIFtdOwogICAgICB2YXIgcGVyY2VudFNhdmluZ3MgPSBbXTsKCiAgICAgIGZvciAodmFyIGNvbXBldGl0b3IgaW4gdGhpcy5jb21wZXRpdG9ycykgewogICAgICAgIHZhciBjb21wZXRpdG9yUHJpY2UgPSB0aGlzLmNvbXBldGl0b3JzW2NvbXBldGl0b3JdOwoKICAgICAgICBpZiAoY29tcGV0aXRvclByaWNlID4gdGhpcy5vdXJQcmljZSkgewogICAgICAgICAgdmFyIGRpZmYgPSBjb21wZXRpdG9yUHJpY2UgLSB0aGlzLm91clByaWNlOwogICAgICAgICAgdmFyIHNhdmluZ3MgPSAoZGlmZiAvIHRoaXMub3VyUHJpY2UgKiAxMDApLnRvRml4ZWQoMik7CiAgICAgICAgICBwZXJjZW50U2F2aW5ncy5wdXNoKHsKICAgICAgICAgICAgY29tcGV0aXRvcjogY29tcGV0aXRvciwKICAgICAgICAgICAgc2F2aW5nczogc2F2aW5ncwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcGVyY2VudFNhdmluZ3M7CiAgICB9LAogICAgd2l0aFNhdmluZ3M6IGZ1bmN0aW9uIHdpdGhTYXZpbmdzKCkgewogICAgICByZXR1cm4gdGhpcy5wZXJjZW50U2F2aW5ncy5sZW5ndGggPiAwOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaXNMYXN0SXRlbTogZnVuY3Rpb24gaXNMYXN0SXRlbShpbmRleCkgewogICAgICByZXR1cm4gdGhpcy5zb3J0ZWRQcmljZXMubGVuZ3RoIC0gMSA9PSBpbmRleDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["PriceList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAA,SAAA,MAAA,aAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GAPA;AAUA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,QAAA,EAAA;AAFA,GAVA;AAcA,EAAA,QAAA,EAAA;AACA;AACA;AACA;AACA;AACA,IAAA,WALA,yBAKA;AACA,aAAA,KAAA,MAAA,IAAA,KAAA,MAAA,CAAA,WAAA,GAAA,KAAA,MAAA,CAAA,WAAA,GAAA,IAAA;AACA,KAPA;AAQA,IAAA,QARA,sBAQA;AACA,aAAA,KAAA,MAAA,GAAA,KAAA,MAAA,CAAA,KAAA,GAAA,CAAA;AACA,KAVA;AAWA,IAAA,YAXA,0BAWA;AACA,UAAA,CAAA,KAAA,WAAA,EAAA,OAAA,EAAA;AACA,UAAA,GAAA,GAAA,MAAA,CAAA,OAAA,CAAA,KAAA,WAAA,CAAA;AACA,MAAA,GAAA,CAAA,IAAA,CAAA,CAAA,KAAA,IAAA,EAAA,KAAA,QAAA,EAAA,IAAA,CAAA;AACA,UAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAA,GAAA,CAAA,CAAA;AAAA,OAAA,CAAA;AACA,aAAA,MAAA;AACA,KAjBA;AAkBA,IAAA,cAlBA,4BAkBA;AACA,UAAA,CAAA,KAAA,WAAA,EAAA,OAAA,EAAA;AACA,UAAA,cAAA,GAAA,EAAA;;AACA,WAAA,IAAA,UAAA,IAAA,KAAA,WAAA,EAAA;AACA,YAAA,eAAA,GAAA,KAAA,WAAA,CAAA,UAAA,CAAA;;AACA,YAAA,eAAA,GAAA,KAAA,QAAA,EAAA;AACA,cAAA,IAAA,GAAA,eAAA,GAAA,KAAA,QAAA;AACA,cAAA,OAAA,GAAA,CAAA,IAAA,GAAA,KAAA,QAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,UAAA,cAAA,CAAA,IAAA,CAAA;AAAA,YAAA,UAAA,EAAA,UAAA;AAAA,YAAA,OAAA,EAAA;AAAA,WAAA;AACA;AACA;;AACA,aAAA,cAAA;AACA,KA9BA;AA+BA,IAAA,WA/BA,yBA+BA;AACA,aAAA,KAAA,cAAA,CAAA,MAAA,GAAA,CAAA;AACA;AAjCA,GAdA;AAiDA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,KADA,EACA;AACA,aAAA,KAAA,YAAA,CAAA,MAAA,GAAA,CAAA,IAAA,KAAA;AACA;AAHA;AAjDA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"bg-success price\">\n      <strong>{{ `${currency} ${ourPrice}` }}</strong>\n    </div>\n    <template v-if=\"withSavings\">\n      <div\n        v-for=\"percentSaving in percentSavings\"\n        :key=\"percentSaving.competitor\"\n      >\n        <strong>\n          <u>{{ `Save ${percentSaving.savings}% vs ${percentSaving.competitor}!` }}</u>\n        </strong>\n      </div>\n    </template>\n    <PriceItem\n      v-for=\"(price, index) in sortedPrices\"\n      :key=\"index\"\n      :name=\"price[0]\"\n      :value=\"price[1]\"\n      :competitor=\"!price[2]\"\n      :currency=\"currency\"\n      :lastItem='isLastItem(index)'\n    >\n    </PriceItem>\n  </div>\n</template>\n\n<script>\nimport PriceItem from './PriceItem';\n\nexport default {\n  name: \"PriceList\",\n  data() {\n    return {\n      name: 'Us'\n    };\n  },\n  components: {\n    PriceItem\n  },\n  props: {\n    prices: Object,\n    currency: String\n  },\n  computed: {\n    // When no competitor rates are given, do not show anything or savings (since there's no basis for comparison)\n    // When all competitor rates are cheaper than us, there's no savings\n    // When 1 or more competitor rates are more expensive than us, we should show our savings over the competitor's rates\n    // When there's competitor pricing, we should show in the competitor pricing list our rates and where we stand in the ordering of cheapest to most expensive\n    competitors() {\n      return this.prices && this.prices.competitors ? this.prices.competitors : null; \n    },\n    ourPrice() {\n      return this.prices ? this.prices.price : 0;\n    },\n    sortedPrices() {\n      if(!this.competitors) return [];\n      let all = Object.entries(this.competitors);\n      all.push([this.name, this.ourPrice, true]);\n      let sorted = all.sort((a, b) => (a[1] > b[1]) ? 1 : -1);\n      return sorted;\n    },\n    percentSavings() {\n      if(!this.competitors) return [];\n      let percentSavings = [];\n      for(const competitor in this.competitors) {\n        let competitorPrice = this.competitors[competitor]\n        if(competitorPrice > this.ourPrice) {\n          let diff = competitorPrice - this.ourPrice;\n          let savings = ((diff/this.ourPrice) * 100).toFixed(2);\n          percentSavings.push({competitor, savings});\n        }\n      }\n      return percentSavings;\n    },\n    withSavings() {\n      return this.percentSavings.length > 0;\n    }\n  },\n  methods: {\n    isLastItem(index) {\n      return this.sortedPrices.length - 1 == index;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.price {\n  color: white;\n  padding: 10px;\n  font-size: large;\n}\n</style>\n"],"sourceRoot":"src/components"}]}