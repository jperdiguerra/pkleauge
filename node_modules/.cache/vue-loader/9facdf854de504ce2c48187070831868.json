{"remainingRequest":"/Users/jp/workspace/pklgue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jp/workspace/pklgue/src/components/HotelList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jp/workspace/pklgue/src/components/HotelList.vue","mtime":1597486227883},{"path":"/Users/jp/workspace/pklgue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IEhvdGVsSXRlbSBmcm9tICcuL0hvdGVsSXRlbSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvdGVsTGlzdCIsCiAgY29tcG9uZW50czogewogICAgSG90ZWxJdGVtCiAgfSwKICBwcm9wczogewogICAgY3VycmVuY3k6IFN0cmluZwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydhbGxIb3RlbHMnLCAnYWxsUHJpY2VzJ10pLAogICAgcHJpY2VzTWFwKCkgewogICAgICByZXR1cm4gdGhpcy5hbGxQcmljZXMgPyBuZXcgTWFwKHRoaXMuYWxsUHJpY2VzLm1hcChwID0+IFtwLmlkLCBwXSkpIDogbnVsbDsKICAgIH0sCiAgICBzb3J0ZWRIb3RlbHMoKSB7CiAgICAgIGlmKCF0aGlzLmFsbFByaWNlcykgcmV0dXJuIFtdOwogICAgICBsZXQgc29ydGVkID0gW107CiAgICAgIGxldCBwcmljZVVuYXZhaWxhYmxlID0gW107CiAgICAgIGZvcihsZXQgaG90ZWwgb2YgdGhpcy5hbGxIb3RlbHMpIHsKICAgICAgICBsZXQgaG90ZWxQcmljZXMgPSB0aGlzLmdldFByaWNlKGhvdGVsLmlkKQogICAgICAgIGlmKGhvdGVsUHJpY2VzKSB7CiAgICAgICAgICBob3RlbC5wcmljZXMgPSBob3RlbFByaWNlczsKICAgICAgICAgIHNvcnRlZC5wdXNoKGhvdGVsKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcmljZVVuYXZhaWxhYmxlLnB1c2goaG90ZWwpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZihwcmljZVVuYXZhaWxhYmxlLmxlbmd0aCA+IDApIHNvcnRlZC5wdXNoKHByaWNlVW5hdmFpbGFibGUpOwogICAgICByZXR1cm4gc29ydGVkLmZsYXQoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFByaWNlKGlkKSB7CiAgICAgIHJldHVybiB0aGlzLnByaWNlc01hcCA/IHRoaXMucHJpY2VzTWFwLmdldChpZCkgOiB7fTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["HotelList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HotelList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <ul class=\"list-group\">\n    <HotelItem\n      v-for=\"hotel in allHotels\"\n      :key=\"hotel.id\"\n      :hotel=\"hotel\"\n      :prices=\"getPrice(hotel.id)\"\n      :currency=\"currency\"\n    >  \n    </HotelItem>\n  </ul>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport HotelItem from './HotelItem';\n\nexport default {\n  name: \"HotelList\",\n  components: {\n    HotelItem\n  },\n  props: {\n    currency: String\n  },\n  computed: {\n    ...mapGetters(['allHotels', 'allPrices']),\n    pricesMap() {\n      return this.allPrices ? new Map(this.allPrices.map(p => [p.id, p])) : null;\n    },\n    sortedHotels() {\n      if(!this.allPrices) return [];\n      let sorted = [];\n      let priceUnavailable = [];\n      for(let hotel of this.allHotels) {\n        let hotelPrices = this.getPrice(hotel.id)\n        if(hotelPrices) {\n          hotel.prices = hotelPrices;\n          sorted.push(hotel)\n        } else {\n          priceUnavailable.push(hotel);\n        }\n      }\n      if(priceUnavailable.length > 0) sorted.push(priceUnavailable);\n      return sorted.flat();\n    }\n  },\n  methods: {\n    getPrice(id) {\n      return this.pricesMap ? this.pricesMap.get(id) : {};\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}