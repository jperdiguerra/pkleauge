{"remainingRequest":"/Users/jp/workspace/hotels-result-currency/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jp/workspace/hotels-result-currency/src/components/PriceList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jp/workspace/hotels-result-currency/src/components/PriceList.vue","mtime":1597333900124},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQcmljZUl0ZW0gZnJvbSAnLi9QcmljZUl0ZW0nOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQcmljZUxpc3QiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAnVXMnCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgUHJpY2VJdGVtCiAgfSwKICBwcm9wczogewogICAgcHJpY2VzOiBPYmplY3QsCiAgICBjdXJyZW5jeTogU3RyaW5nCiAgfSwKICBjb21wdXRlZDogewogICAgLy8gV2hlbiBubyBjb21wZXRpdG9yIHJhdGVzIGFyZSBnaXZlbiwgZG8gbm90IHNob3cgYW55dGhpbmcgb3Igc2F2aW5ncyAoc2luY2UgdGhlcmUncyBubyBiYXNpcyBmb3IgY29tcGFyaXNvbikKICAgIC8vIFdoZW4gYWxsIGNvbXBldGl0b3IgcmF0ZXMgYXJlIGNoZWFwZXIgdGhhbiB1cywgdGhlcmUncyBubyBzYXZpbmdzCiAgICAvLyBXaGVuIDEgb3IgbW9yZSBjb21wZXRpdG9yIHJhdGVzIGFyZSBtb3JlIGV4cGVuc2l2ZSB0aGFuIHVzLCB3ZSBzaG91bGQgc2hvdyBvdXIgc2F2aW5ncyBvdmVyIHRoZSBjb21wZXRpdG9yJ3MgcmF0ZXMKICAgIC8vIFdoZW4gdGhlcmUncyBjb21wZXRpdG9yIHByaWNpbmcsIHdlIHNob3VsZCBzaG93IGluIHRoZSBjb21wZXRpdG9yIHByaWNpbmcgbGlzdCBvdXIgcmF0ZXMgYW5kIHdoZXJlIHdlIHN0YW5kIGluIHRoZSBvcmRlcmluZyBvZiBjaGVhcGVzdCB0byBtb3N0IGV4cGVuc2l2ZQogICAgY29tcGV0aXRvcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLnByaWNlcyAmJiB0aGlzLnByaWNlcy5jb21wZXRpdG9ycyA/IHRoaXMucHJpY2VzLmNvbXBldGl0b3JzIDogbnVsbDsgCiAgICB9LAogICAgb3VyUHJpY2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnByaWNlcyA/IHRoaXMucHJpY2VzLnByaWNlIDogMDsKICAgIH0sCiAgICBzb3J0ZWRQcmljZXMoKSB7CiAgICAgIGlmKCF0aGlzLmNvbXBldGl0b3JzKSByZXR1cm4gW107CiAgICAgIGxldCBhbGwgPSBPYmplY3QuZW50cmllcyh0aGlzLmNvbXBldGl0b3JzKTsKICAgICAgYWxsLnB1c2goW3RoaXMubmFtZSwgdGhpcy5vdXJQcmljZSwgdHJ1ZV0pOwogICAgICBsZXQgc29ydGVkID0gYWxsLnNvcnQoKGEsIGIpID0+IChhWzFdID4gYlsxXSkgPyAxIDogLTEpOwogICAgICByZXR1cm4gc29ydGVkOwogICAgfSwKICAgIHBlcmNlbnRTYXZpbmdzKCkgewogICAgICBpZighdGhpcy5jb21wZXRpdG9ycykgcmV0dXJuIFtdOwogICAgICBsZXQgcGVyY2VudFNhdmluZ3MgPSBbXTsKICAgICAgZm9yKGNvbnN0IGNvbXBldGl0b3IgaW4gdGhpcy5jb21wZXRpdG9ycykgewogICAgICAgIGxldCBjb21wZXRpdG9yUHJpY2UgPSB0aGlzLmNvbXBldGl0b3JzW2NvbXBldGl0b3JdCiAgICAgICAgaWYoY29tcGV0aXRvclByaWNlID4gdGhpcy5vdXJQcmljZSkgewogICAgICAgICAgbGV0IGRpZmYgPSBjb21wZXRpdG9yUHJpY2UgLSB0aGlzLm91clByaWNlOwogICAgICAgICAgbGV0IHNhdmluZ3MgPSAoKGRpZmYvdGhpcy5vdXJQcmljZSkgKiAxMDApLnRvRml4ZWQoMik7CiAgICAgICAgICBwZXJjZW50U2F2aW5ncy5wdXNoKHtjb21wZXRpdG9yLCBzYXZpbmdzfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBwZXJjZW50U2F2aW5nczsKICAgIH0sCiAgICB3aXRoU2F2aW5ncygpIHsKICAgICAgcmV0dXJuIHRoaXMucGVyY2VudFNhdmluZ3MubGVuZ3RoID4gMDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGlzTGFzdEl0ZW0oaW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMuc29ydGVkUHJpY2VzLmxlbmd0aCAtIDEgPT0gaW5kZXg7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["PriceList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PriceList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"bg-success price\">\n      <strong>{{ `${currency} ${ourPrice}` }}</strong>\n    </div>\n    <template v-if=\"withSavings\">\n      <div\n        v-for=\"percentSaving in percentSavings\"\n        :key=\"percentSaving.competitor\"\n      >\n        <strong>\n          <u>{{ `Save ${percentSaving.savings}% vs ${percentSaving.competitor}!` }}</u>\n        </strong>\n      </div>\n    </template>\n    <PriceItem\n      v-for=\"(price, index) in sortedPrices\"\n      :key=\"index\"\n      :name=\"price[0]\"\n      :value=\"price[1]\"\n      :competitor=\"!price[2]\"\n      :currency=\"currency\"\n      :lastItem='isLastItem(index)'\n    >\n    </PriceItem>\n  </div>\n</template>\n\n<script>\nimport PriceItem from './PriceItem';\n\nexport default {\n  name: \"PriceList\",\n  data() {\n    return {\n      name: 'Us'\n    };\n  },\n  components: {\n    PriceItem\n  },\n  props: {\n    prices: Object,\n    currency: String\n  },\n  computed: {\n    // When no competitor rates are given, do not show anything or savings (since there's no basis for comparison)\n    // When all competitor rates are cheaper than us, there's no savings\n    // When 1 or more competitor rates are more expensive than us, we should show our savings over the competitor's rates\n    // When there's competitor pricing, we should show in the competitor pricing list our rates and where we stand in the ordering of cheapest to most expensive\n    competitors() {\n      return this.prices && this.prices.competitors ? this.prices.competitors : null; \n    },\n    ourPrice() {\n      return this.prices ? this.prices.price : 0;\n    },\n    sortedPrices() {\n      if(!this.competitors) return [];\n      let all = Object.entries(this.competitors);\n      all.push([this.name, this.ourPrice, true]);\n      let sorted = all.sort((a, b) => (a[1] > b[1]) ? 1 : -1);\n      return sorted;\n    },\n    percentSavings() {\n      if(!this.competitors) return [];\n      let percentSavings = [];\n      for(const competitor in this.competitors) {\n        let competitorPrice = this.competitors[competitor]\n        if(competitorPrice > this.ourPrice) {\n          let diff = competitorPrice - this.ourPrice;\n          let savings = ((diff/this.ourPrice) * 100).toFixed(2);\n          percentSavings.push({competitor, savings});\n        }\n      }\n      return percentSavings;\n    },\n    withSavings() {\n      return this.percentSavings.length > 0;\n    }\n  },\n  methods: {\n    isLastItem(index) {\n      return this.sortedPrices.length - 1 == index;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.price {\n  color: white;\n  padding: 10px;\n  font-size: large;\n}\n</style>\n"]}]}