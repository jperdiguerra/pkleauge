{"remainingRequest":"/Users/jp/workspace/hotels-result-currency/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jp/workspace/hotels-result-currency/src/components/PriceList.vue?vue&type=style&index=0&id=102633f2&scoped=true&lang=css&","dependencies":[{"path":"/Users/jp/workspace/hotels-result-currency/src/components/PriceList.vue","mtime":1597333900124},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/hotels-result-currency/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucHJpY2UgewogIGNvbG9yOiB3aGl0ZTsKICBwYWRkaW5nOiAxMHB4OwogIGZvbnQtc2l6ZTogbGFyZ2U7Cn0K"},{"version":3,"sources":["PriceList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA","file":"PriceList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"bg-success price\">\n      <strong>{{ `${currency} ${ourPrice}` }}</strong>\n    </div>\n    <template v-if=\"withSavings\">\n      <div\n        v-for=\"percentSaving in percentSavings\"\n        :key=\"percentSaving.competitor\"\n      >\n        <strong>\n          <u>{{ `Save ${percentSaving.savings}% vs ${percentSaving.competitor}!` }}</u>\n        </strong>\n      </div>\n    </template>\n    <PriceItem\n      v-for=\"(price, index) in sortedPrices\"\n      :key=\"index\"\n      :name=\"price[0]\"\n      :value=\"price[1]\"\n      :competitor=\"!price[2]\"\n      :currency=\"currency\"\n      :lastItem='isLastItem(index)'\n    >\n    </PriceItem>\n  </div>\n</template>\n\n<script>\nimport PriceItem from './PriceItem';\n\nexport default {\n  name: \"PriceList\",\n  data() {\n    return {\n      name: 'Us'\n    };\n  },\n  components: {\n    PriceItem\n  },\n  props: {\n    prices: Object,\n    currency: String\n  },\n  computed: {\n    // When no competitor rates are given, do not show anything or savings (since there's no basis for comparison)\n    // When all competitor rates are cheaper than us, there's no savings\n    // When 1 or more competitor rates are more expensive than us, we should show our savings over the competitor's rates\n    // When there's competitor pricing, we should show in the competitor pricing list our rates and where we stand in the ordering of cheapest to most expensive\n    competitors() {\n      return this.prices && this.prices.competitors ? this.prices.competitors : null; \n    },\n    ourPrice() {\n      return this.prices ? this.prices.price : 0;\n    },\n    sortedPrices() {\n      if(!this.competitors) return [];\n      let all = Object.entries(this.competitors);\n      all.push([this.name, this.ourPrice, true]);\n      let sorted = all.sort((a, b) => (a[1] > b[1]) ? 1 : -1);\n      return sorted;\n    },\n    percentSavings() {\n      if(!this.competitors) return [];\n      let percentSavings = [];\n      for(const competitor in this.competitors) {\n        let competitorPrice = this.competitors[competitor]\n        if(competitorPrice > this.ourPrice) {\n          let diff = competitorPrice - this.ourPrice;\n          let savings = ((diff/this.ourPrice) * 100).toFixed(2);\n          percentSavings.push({competitor, savings});\n        }\n      }\n      return percentSavings;\n    },\n    withSavings() {\n      return this.percentSavings.length > 0;\n    }\n  },\n  methods: {\n    isLastItem(index) {\n      return this.sortedPrices.length - 1 == index;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.price {\n  color: white;\n  padding: 10px;\n  font-size: large;\n}\n</style>\n"]}]}