{"remainingRequest":"/Users/jp/workspace/pklgue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jp/workspace/pklgue/src/components/PriceList.vue?vue&type=style&index=0&id=102633f2&scoped=true&lang=css&","dependencies":[{"path":"/Users/jp/workspace/pklgue/src/components/PriceList.vue","mtime":1597549846491},{"path":"/Users/jp/workspace/pklgue/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jp/workspace/pklgue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpzdXAgewogIHRvcDogLTRweDsKfQoKLnByaWNlIHsKICBjb2xvcjogd2hpdGU7CiAgcGFkZGluZzogMTBweDsKICBmb250LXNpemU6IHgtbGFyZ2U7CiAgd2lkdGg6IDIwMHB4Owp9CgoudGF4LWZlZXMgewogIGZvbnQtc2l6ZTogc21hbGw7Cn0KCltkYXRhLXBvcG92ZXI9J3RheC1mZWVzJ10gewogIGJhY2tncm91bmQ6ICM0NDQ7CiAgY29sb3I6IHJlZDsKCiAgZm9udC1zaXplOiAxMnB4OwogIGxpbmUtaGVpZ2h0OiAxLjU7CiAgbWFyZ2luOiA1cHg7Cn0K"},{"version":3,"sources":["PriceList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"PriceList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"bg-success price\">\n      <strong>{{ priceDisplay }}</strong><sup v-if=\"taxesAndFees\">*</sup>\n      <div class=\"tax-fees\" name=\"tax-fees\"\n        v-if=\"taxesAndFees\"\n        v-tooltip.top-center=\"taxesAndFeesTooltip\"\n      >\n        * Price includes taxes and fees!\n      </div>\n    </div>\n\n    <template v-if=\"withSavings\">\n      <div\n        class=\"savings\"\n        v-for=\"percentSaving in percentSavings\"\n        :key=\"percentSaving.competitor\"\n      >\n        <strong>\n          <u>{{ `Save ${percentSaving.savings}% vs ${percentSaving.competitor}` }}</u>\n        </strong>\n      </div>\n    </template>\n    <PriceItem\n      v-for=\"(price, index) in sortedPrices\"\n      :key=\"index\"\n      :name=\"price[0]\"\n      :value=\"roundAmount(price[1])\"\n      :competitor=\"!price[2]\"\n      :currency=\"currency\"\n      :lastItem='isLastItem(index)'\n    >\n    </PriceItem>\n  </div>\n</template>\n\n<script>\nimport PriceItem from './PriceItem';\n\nexport default {\n  name: \"PriceList\",\n  data() {\n    return {\n      name: 'Us',\n      roundToOne: ['USD', 'SGD', 'CNY'],\n      roundToHundred: ['KRW', 'JPY', 'IDR']\n    };\n  },\n  components: {\n    PriceItem\n  },\n  props: {\n    prices: Object,\n    currency: String\n  },\n  computed: {\n    competitors() {\n      return this.prices && this.prices.competitors ? this.prices.competitors : null; \n    },\n    ourPrice() {\n      return this.prices ? this.roundAmount(this.prices.price) : 0;\n    },\n    sortedPrices() {\n      if(!this.competitors) return [];\n      let all = Object.entries(this.competitors);\n      all.push([this.name, this.ourPrice, true]);\n      let sorted = all.sort((a, b) => (a[1] > b[1]) ? 1 : -1);\n      return sorted;\n    },\n    percentSavings() {\n      if(!this.competitors) return [];\n      let percentSavings = [];\n      for(const competitor in this.competitors) {\n        let competitorPrice = this.competitors[competitor]\n        if(competitorPrice > this.ourPrice) {\n          let diff = competitorPrice - this.ourPrice;\n          let savings = ((diff/this.ourPrice) * 100).toFixed(2);\n          percentSavings.push({competitor, savings});\n        }\n      }\n      return percentSavings;\n    },\n    priceDisplay() {\n      return this.prices ? `${this.currency} ${this.ourPrice}` : 'Rates unavailable';\n    },\n    withSavings() {\n      return this.percentSavings.length > 0;\n    },\n    taxesAndFees() {\n      return this.prices ? this.prices.taxes_and_fees : null;\n    },\n    taxesAndFeesTooltip() {\n      if(!this.taxesAndFees) return '';\n      return `Tax: ${this.taxesAndFees.tax}<br> Hotel fees: ${this.taxesAndFees.hotel_fees}`;\n    }\n  },\n  methods: {\n    isLastItem(index) {\n      return this.sortedPrices.length - 1 == index;\n    },\n    roundAmount(amount) {\n      if(this.roundToOne.includes(this.currency)) return Math.round(amount);\n      if(this.roundToHundred.includes(this.currency)) return (Math.round(amount/100) * 100);\n      return amount;\n    }\n  }\n}\n</script>\n\n<style scoped>\nsup {\n  top: -4px;\n}\n\n.price {\n  color: white;\n  padding: 10px;\n  font-size: x-large;\n  width: 200px;\n}\n\n.tax-fees {\n  font-size: small;\n}\n\n[data-popover='tax-fees'] {\n  background: #444;\n  color: red;\n\n  font-size: 12px;\n  line-height: 1.5;\n  margin: 5px;\n}\n</style>\n"]}]}